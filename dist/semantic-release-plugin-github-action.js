"use strict";var e=require("execa");const m=({branch:t,nextRelease:s})=>({branch:t.name,version:s.version,tag:s.gitTag,notes:s.notes??""}),p=async(t={},s)=>{const{branch:n,version:h,tag:o,notes:l}=m(s);console.log("options:",t),console.log("branch:",n),console.log("version:",h),console.log("tag:",o),console.log("notes:",l),console.log("-------------- delete local tag ----------");const c=await e.execa("git",["tag","-d",o]);console.log("stderr:",c.stderr),console.log("stdout:",c.stdout),console.log("-------------- delete remote tag ---------");const r=await e.execa("git",["push","origin","-d","tag",o]);console.log("stderr:",r.stderr),console.log("stdout:",r.stdout);const a=`release: ${o}`;console.log("-------------- commit release ------------");const g=await e.execa("git",["commit","-S","--allow-empty","-m",`"${a}

${l}"`]);console.log("stderr:",g.stderr),console.log("stdout:",g.stdout),console.log("-------------- tag release ---------------");const i=await e.execa("git",["tag","-s",o,"-m",`"${a}

${l}"`]);console.log("stderr:",i.stderr),console.log("stdout:",i.stdout),console.log("-------------- push commit release --------------");const d=await e.execa("git",["push","origin",n]);console.log("stderr:",d.stderr),console.log("stdout:",d.stdout),console.log("-------------- push tag release --------------");const u=await e.execa("git",["push","origin",o]);console.log("stderr:",u.stderr),console.log("stdout:",u.stdout)};exports.publish=p;
